<launch>
	<arg name="map_file"       default=" $(find xbot_cruise)/map/001.yaml"/>
	<arg name="initial_pose_x" default="2.0"/>
	<arg name="initial_pose_y" default="2.0"/>
	<arg name="initial_pose_a" default="0.0"/>
	<param name="/use_sim_time" value="true"/>
	<!-- xbot base controller -->
	<include file="$(find xbot_slam)/launch/include/xbot_bringup.xml">
	</include>
	<!-- sensors -->
	<include file="$(find xbot_slam)/launch/include/sensors.xml">

	</include>
	<!--  ****** Maps *****  -->
	<node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)">
		<param name="frame_id" value="/map"/>
	</node>
	<!--  ************** Navigation  ***************  -->
	<include file="$(find xbot_slam)/launch/include/move_base.launch.xml"/>
	<!-- AMCL -->
	<include file="$(find xbot_slam)/launch/include/amcl.launch.xml">
		<arg name="scan_topic" value="scan"/>
		<arg name="use_map_topic" value="true"/>
		<arg name="initial_pose_x" value="$(arg initial_pose_x)"/>
		<arg name="initial_pose_y" value="$(arg initial_pose_y)"/>
		<arg name="initial_pose_a" value="$(arg initial_pose_a)"/>
	</include>
	<!-- give move base a goal -->
	<node name="pub_goal" pkg="xbot_slam" type="pub_clicked_goal.py"/>

	<!--  **************** Visualisation ****************  -->
	<include file="$(find xbot_control_pannel)/launch/control_pannel.launch"/>


</launch>
